@page "/studio/{creatorId:guid}/config/targets/new"

@using Namezr.Components.Layout
@using Namezr.Features.Creators.Components
@using Microsoft.AspNetCore.Components.Sections
@using Namezr.Client
@using Namezr.Features.StudioCommon.Components
@using Namezr.Components

@layout StudioPageHeaderLayout

<PageTitle>
    Add support target
    <StudioTitleSuffix/>
</PageTitle>

<SectionContent SectionId="StudioPageHeaderLayout.BreadcrumbSectionId">
    <HxBreadcrumb>
        <ConfigurationBreadcrumbItems CreatorId="CreatorId"/>

        <HxBreadcrumbItem
            Href=@($"studio/{CreatorId.NoHyphens()}/config/targets")
            Text="Support targets"
        />

        <HxBreadcrumbItem
            Href=@($"studio/{CreatorId.NoHyphens()}/config/targets/new")
            Text="Add"
        />
    </HxBreadcrumb>
</SectionContent>

<SectionContent SectionId="StudioPageHeaderLayout.TitleSectionId">
    Add support target
</SectionContent>

<PotentialTargetSelector
    CreatorId="CreatorId"
/>

@code {

    [CascadingParameter]
    public required IStudioPageContext StudioContext { get; set; }

    [Parameter]
    public Guid CreatorId { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await StudioContext.SetCurrentCreatorAndValidateAccess(CreatorId);
    }

}